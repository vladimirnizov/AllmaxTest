{
  "version": 3,
  "file": "selector-utils.js",
  "sources": [
    "ng://@ngxs/store/packages/store/src/utils/selector-utils.ts"
  ],
  "sourcesContent": [
    "import {\n  SelectFromState,\n  fastPropGetter,\n  ensureSelectorMetadata,\n  getSelectorMetadata,\n  getStoreMetadata\n} from '../internal/internals';\nimport { memoize } from '../utils/memoize';\n\n/**\n * Function for creating a selector\n * @param selectors The selectors to use to create the arguments of this function\n * @param originalFn The original function being made into a selector\n */\nexport function createSelector(\n  selectors: any[],\n  originalFn: any,\n  creationMetadata?: { containerClass: any; selectorName: string }\n) {\n  const wrappedFn = function wrappedSelectorFn(...args) {\n    const returnValue = originalFn(...args);\n    if (returnValue instanceof Function) {\n      const innerMemoizedFn = memoize.apply(null, [returnValue]);\n      return innerMemoizedFn;\n    }\n    return returnValue;\n  };\n  const memoizedFn = memoize(wrappedFn);\n  const containerClass = creationMetadata && creationMetadata.containerClass;\n\n  const fn = state => {\n    const results = [];\n\n    const selectorsToApply = [];\n\n    if (containerClass) {\n      // If we are on a state class, add it as the first selector parameter\n      const metadata = getStoreMetadata(containerClass);\n      if (metadata) {\n        selectorsToApply.push(containerClass);\n      }\n    }\n    if (selectors) {\n      selectorsToApply.push(...selectors);\n    }\n    // Determine arguments from the app state using the selectors\n    if (selectorsToApply) {\n      results.push(...selectorsToApply.map(a => getSelectorFn(a)(state)));\n    }\n\n    // if the lambda tries to access a something on the\n    // state that doesn't exist, it will throw a TypeError.\n    // since this is quite usual behaviour, we simply return undefined if so.\n    try {\n      return memoizedFn(...results);\n    } catch (ex) {\n      if (ex instanceof TypeError) {\n        return undefined;\n      }\n      throw ex;\n    }\n  };\n\n  const selectorMetaData = ensureSelectorMetadata(memoizedFn);\n  selectorMetaData.originalFn = originalFn;\n  selectorMetaData.selectFromAppState = fn;\n  if (creationMetadata) {\n    selectorMetaData.containerClass = creationMetadata.containerClass;\n    selectorMetaData.selectorName = creationMetadata.selectorName;\n  }\n  return memoizedFn;\n}\n\n/**\n * This function gets the selector function to be used to get the selected slice from the app state\n * @ignore\n */\nexport function getSelectorFn(selector: any): SelectFromState {\n  const selectorMetadata = getSelectorMetadata(selector);\n  if (selectorMetadata) {\n    const selectFromAppState = selectorMetadata.selectFromAppState;\n    if (selectFromAppState) {\n      return selectFromAppState;\n    }\n  }\n  const stateMetadata = getStoreMetadata(selector);\n  if (stateMetadata && stateMetadata.path) {\n    return fastPropGetter(stateMetadata.path.split('.'));\n  }\n  return selector;\n}\n"
  ],
  "names": [],
  "mappings": "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"
}
